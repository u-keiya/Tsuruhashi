# ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²: 2025-08-15

æ—¥ä»˜: 2025-08-15
ãƒ¢ãƒ¼ãƒ‰: ğŸ§¬ Detail Designer â†’ ğŸ“ Documentation Synthesizer

ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã¯ã€åŸºæœ¬è¨­è¨ˆã‚’åŸºã«è©³ç´°è¨­è¨ˆã¸å±•é–‹ã™ã‚‹ä½œæ¥­ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚USDM è¦ä»¶ã®èª­ã¿è¾¼ã¿ã€Bot Core ã®ã‚¯ãƒ©ã‚¹å›³ä½œæˆã€ä¸»è¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã®è¿½åŠ ã€OpenAPI åˆç‰ˆã®ä½œæˆã€ã‚¨ãƒ©ãƒ¼ã‚«ã‚¿ãƒ­ã‚°ã®ä½œæˆã€ç”Ÿæˆç‰©ã¸ USDM ID/ç”¨èªæ•´åˆæ€§ã®ä»˜ä¸ã‚’å®Œäº†ã—ã¦ã„ã¾ã™ã€‚Web UI ã®è¨­è¨ˆã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ‰±ã„ã®ã¾ã¾ç¶™ç¶šã—ã¾ã™ã€‚

## Summary
- åŸºæœ¬è¨­è¨ˆã‚’å—ã‘ã¦ã€Bot Core ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚¯ãƒ©ã‚¹å›³ï¼ˆMiningEngine ä»–ï¼‰ã‚’ä½œæˆã€‚æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¯ docs/03_design/diagrams/class/botcore.puml ã«è¿½åŠ ã€‚  
- SummonBot / SetArea ã‚’å«ã‚€ä¸»è¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’è¿½åŠ ï¼ˆdocs/03_design/diagrams/sequence/summon_setarea.pumlï¼‰ã€‚  
- AutoMining Cycleã€Tool Break/AutoSwapã€Progress Report ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’è¿½åŠ ï¼ˆdocs/03_design/diagrams/sequence/auto_mining_cycle.pumlã€tool_break_swap.pumlã€progress_report.pumlï¼‰ã€‚  
- OpenAPI åˆç‰ˆã‚’ä½œæˆï¼ˆdocs/03_design/api/openapi.yamlï¼‰ã€‚lint ã«é–¢ã™ã‚‹æŒ‡æ‘˜ã¯ä»Šå¾Œã®ä¿®æ­£æ–¹é‡ã€‚  
- ã‚¨ãƒ©ãƒ¼ã‚«ã‚¿ãƒ­ã‚°åˆç‰ˆã‚’ä½œæˆï¼ˆdocs/03_design/api/error_catalog.mdï¼‰ã€‚  
- ç”Ÿæˆç‰©ã« USDM ID/ç”¨èªæ•´åˆæ€§ã‚’ä»˜ä¸ã€‚  

## User Requirementsï¼ˆè¦ä»¶ã®æ•´ç†ãƒ»ç¢ºèªï¼‰
- USDM è¦ä»¶ã®èª­ã¿è¾¼ã¿ã¨å¯¾è±¡ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®æ•´ç†ï¼ˆUS-001 ã€œ US-004ï¼‰  
- Bot Core ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚¯ãƒ©ã‚¹å›³ä½œæˆï¼ˆMiningEngine, PathFinder, ToolManager ãªã©ï¼‰  
- ä¸»è¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã®è¿½åŠ ï¼ˆSummonBot/SetAreaã€AutoMiningCycleã€ToolBreak/AutoSwapã€ProgressReportï¼‰  
- Control API ã® OpenAPI åˆç‰ˆä½œæˆï¼ˆ/bots/summonã€/{botId}/areaã€/startã€/stopã€/progressï¼‰  
- ã‚¨ãƒ©ãƒ¼ã‚«ã‚¿ãƒ­ã‚°ã®åˆç‰ˆä½œæˆ  
- ç”Ÿæˆç‰©ã¸ USDM ID/ç”¨èªæ•´åˆæ€§ã‚’ä»˜ä¸  
- Web UI ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãŸã‚ç¾æ™‚ç‚¹ã§ã¯é™¤å¤–

é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå‚ç…§ãƒªãƒ³ã‚¯ï¼‰:
- USDM ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®šç¾©
  - [`docs/02_requirements/usdm/US-001.yaml`](docs/02_requirements/usdm/US-001.yaml:1)
  - [`docs/02_requirements/usdm/US-002.yaml`](docs/02_requirements/usdm/US-002.yaml:1)
  - [`docs/02_requirements/usdm/US-003.yaml`](docs/02_requirements/usdm/US-003.yaml:1)
  - [`docs/02_requirements/usdm/US-004.yaml`](docs/02_requirements/usdm/US-004.yaml:1)
- Bot Core ã‚¯ãƒ©ã‚¹å›³
  - [`docs/03_design/diagrams/class/botcore.puml`](docs/03_design/diagrams/class/botcore.puml:1)
- ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
  - [`docs/03_design/diagrams/sequence/summon_setarea.puml`](docs/03_design/diagrams/sequence/summon_setarea.puml:1)
  - [`docs/03_design/diagrams/sequence/auto_mining_cycle.puml`](docs/03_design/diagrams/sequence/auto_mining_cycle.puml:1)
  - [`docs/03_design/diagrams/sequence/tool_break_swap.puml`](docs/03_design/diagrams/sequence/tool_break_swap.puml:1)
  - [`docs/03_design/diagrams/sequence/progress_report.puml`](docs/03_design/diagrams/sequence/progress_report.puml:1)
- OpenAPI å®šç¾©
  - [`docs/03_design/api/openapi.yaml`](docs/03_design/api/openapi.yaml:1)
- ã‚¨ãƒ©ãƒ¼ã‚«ã‚¿ãƒ­ã‚°
  - [`docs/03_design/api/error_catalog.md`](docs/03_design/api/error_catalog.md:1)
- ADR å‚ç…§
  - [`docs/03_design/adr/0001-bot-framework-tech-stack.md`](docs/03_design/adr/0001-bot-framework-tech-stack.md:1)
  - [`docs/03_design/adr/0002-async-retry-architecture.md`](docs/03_design/adr/0002-async-retry-architecture.md:1)

## Key Decisions
- Bot Core ã®ã‚¯ãƒ©ã‚¹å›³ã‚’æ–°è¦ä½œæˆã—ã€ValueObjectï¼Entityï¼Service ã®é–¢ä¿‚ã‚’æ˜ç¤ºã€‚USDM å‚ç…§ã‚’ä»˜ä¸ã€‚  
- Summon/SetArea ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’æœ€åˆã®å…¬é–‹ç‰ˆã¨ã—ã¦è¿½åŠ ã€‚ã“ã‚Œã‚’åŸºç‚¹ã«ä»–ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’æ‹¡å¼µã€‚  
- API ã®åˆç‰ˆã‚’ OpenAPI 3.1 ã§å®šç¾©ã€‚lint ã®å¾®ä¿®æ­£ã¯ä»Šå¾Œå¯¾å¿œæ–¹é‡ã¨ã—ãŸï¼ˆå¯¾å¿œã‚¿ã‚¹ã‚¯ã¯åˆ¥é€”ç®¡ç†ï¼‰  

## Action Items (é€²æ—)
- [x] USDMè¦ä»¶ã‚’èª­è¾¼ã‚“ã§å¯¾è±¡ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’æ•´ç†  
- [x] Bot Core ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã‚¯ãƒ©ã‚¹å›³ã‚’ä½œæˆ â€” docs/03_design/diagrams/class/botcore.puml  
- [x] ä¸»è¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆ â€” summon_setarea.puml, auto_mining_cycle.puml, tool_break_swap.puml, progress_report.puml  
- [x] Control API OpenAPI å®šç¾©ã‚’ä½œæˆ â€” docs/03_design/api/openapi.yaml  
- [x] ã‚¨ãƒ©ãƒ¼ã‚«ã‚¿ãƒ­ã‚°åˆç‰ˆä½œæˆ â€” docs/03_design/api/error_catalog.md  
- [x] ç”Ÿæˆç‰©ã¸ USDM ID & ç”¨èªæ•´åˆæ€§ã‚’ä»˜ä¸  

## References
- USDM: ã¹ãƒ¼ã‚¹ã¨ãªã‚‹è¦ä»¶ãƒ•ã‚¡ã‚¤ãƒ«  
  - [`docs/02_requirements/usdm/US-001.yaml`](docs/02_requirements/usdm/US-001.yaml:1)  
  - [`docs/02_requirements/usdm/US-002.yaml`](docs/02_requirements/usdm/US-002.yaml:1)  
  - [`docs/02_requirements/usdm/US-003.yaml`](docs/02_requirements/usdm/US-003.yaml:1)  
  - [`docs/02_requirements/usdm/US-004.yaml`](docs/02_requirements/usdm/US-004.yaml:1)  
- Bot Core ã‚¯ãƒ©ã‚¹å›³: [`docs/03_design/diagrams/class/botcore.puml`](docs/03_design/diagrams/class/botcore.puml:1)  
- ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³:  
  - [`docs/03_design/diagrams/sequence/summon_setarea.puml`](docs/03_design/diagrams/sequence/summon_setarea.puml:1)  
  - [`docs/03_design/diagrams/sequence/auto_mining_cycle.puml`](docs/03_design/diagrams/sequence/auto_mining_cycle.puml:1)  
  - [`docs/03_design/diagrams/sequence/tool_break_swap.puml`](docs/03_design/diagrams/sequence/tool_break_swap.puml:1)  
  - [`docs/03_design/diagrams/sequence/progress_report.puml`](docs/03_design/diagrams/sequence/progress_report.puml:1)  
- OpenAPI åˆç‰ˆ: [`docs/03_design/api/openapi.yaml`](docs/03_design/api/openapi.yaml:1)  
- Error Catalog: [`docs/03_design/api/error_catalog.md`](docs/03_design/api/error_catalog.md:1)  
- ADR å‚ç…§: [`docs/03_design/adr/0001-bot-framework-tech-stack.md`](docs/03_design/adr/0001-bot-framework-tech-stack.md:1)ã€[`docs/03_design/adr/0002-async-retry-architecture.md`](docs/03_design/adr/0002-async-retry-architecture.md:1)

æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆï¼ˆä»»æ„ã§å®Ÿæ–½å¯ï¼‰
- OpenAPI ã® lint ä¿®æ­£ã‚’åˆ¥ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å¯¾å¿œã™ã‚‹è¨ˆç”»ã‚’ç«‹ã¦ã‚‹
- Web UI ã®å®Ÿè£…ã‚¿ã‚¹ã‚¯ã‚’æ¬¡ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆã«æ­£å¼ã«è¿½åŠ ã™ã‚‹

ä»¥ä¸Šã€ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚æ¬¡ã®æŒ‡ç¤ºã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚ 